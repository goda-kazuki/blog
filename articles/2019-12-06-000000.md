---
title: "AWS RDS Oracle構築手順(VPCやサブネットの作成から)"
published_at: "2019-12-05"
type: "tech"
published: true
coverImage: "20210906161012.png"
---

# はじめに

RDSでOracleDBを構築しようとしたが、 VPCは2箇所以上のAZ使って~などと指摘されて、作成できなかったので、 VPCの構築から行いました。作業メモを残します。

## 構成図

![f:id:gdtypk:20210906161012p:plain](/images/20210906161012.png)

初めてdraw.io使って作ってみました。[参考になった記事](https://qiita.com/nave-m/items/68425f476b254a1a47b0)

## VPCの作成

### パブリックとプライベートサブネットを持つVPCの作成

![f:id:gdtypk:20210906161029p:plain](/images/20210906161029.png)

### インターネットゲートウェイの作成

後で必要になるので、作っておきます。

![f:id:gdtypk:20210906161044p:plain](/images/20210906161044.png)

### 新しくパブリック・プライベートサブネットを作成

1. 先ほど作成した、サブネットとは違うアベイラビリティーゾーンを確認しておく。
2. 「サブネットの作成」のページで、パブリック、サブネットを1つずつ作成。

IPv4 CIDR ブロックについては、 パブリックが10.0.2.0/24 プライベートが10.0.3.0/24を設定する。

![f:id:gdtypk:20210906161101p:plain:w600](/images/20210906161101.png)

### ルートテーブルの編集

ルートテーブルを2つ作成します。

1. プライベートサブネット用のルートテーブルを作成し、ターゲットをNATゲートウェイに設定する。
2. パブリックサブネット用のルートテーブルを作成し、ターゲットを先程作成したインターネットゲートウェイに設定する。
    
    ## RDSの作成
    
    特に記述することは無いと思いますが、VPCを選択するようにしてください。
    
    ## RDSの編集
    
    無事、RDSの作成が完了したら、「変更」を選択し、パブリックアクセシビリティを許可しておきましょう。
    
    ## DBクライアントソフトで接続
    
    なんでもいいと思いますが、私はTablePlusを使用しています。 いろんな種類に繋ぐことができるのでいい感じです。
    
    | 項目 | 入力値 |
    | --- | --- |
    | Host | 設定画面にあるエンドポイント |
    | Port | 設定画面にあるポート |
    | User | 設定したユーザID |
    | Password | 設定したパスワード |
    | SID | 使用するDB(デフォルトはORCL) |
    
    ![f:id:gdtypk:20210906161127p:plain](/images/20210906161127.png)
    

無事接続!!

## はまった点

RDSのタイムアウトにより、DBに接続できなかった。 原因分からず、お昼休憩に入って、1時間くらい経過した後に、接続試すと、接続できました。 少しタイムラグとかあるんですかねー。
